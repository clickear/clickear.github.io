<!DOCTYPE html>
<html><head><title>Auto Layout</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Auto Layout"/><meta property="og:description" content="/* Download this file and save to your Obsidian Vault including the first line, or open it in ‚ÄúRaw‚Äù and copy the entire contents to Obsidian. This script performs automatic layout for the selected top-level grouping objects."/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="/* Download this file and save to your Obsidian Vault including the first line, or open it in ‚ÄúRaw‚Äù and copy the entire contents to Obsidian. This script performs automatic layout for the selected top-level grouping objects."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`./static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="Auto-Layout"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href=".">ü™¥ Quartz 4.0</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div></div><div class="center"><div class="page-header"><div class="popover-hint"><h1 class="article-title">Auto Layout</h1><p class="content-meta">Dec 26, 2023, 6 min read</p></div></div><article class="popover-hint"><p>/*</p>
<p><img src="https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-download-raw.jpg" alt/></p>
<p>Download this file and save to your Obsidian Vault including the first line, or open it in ‚ÄúRaw‚Äù and copy the entire contents to Obsidian.</p>
<p><img src="https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-auto-layout.png" alt/></p>
<p>This script performs automatic layout for the selected top-level grouping objects. It is powered by <a href="https://github.com/kieler/elkjs" class="external">elkjs</a> and needs to be connected to the Internet.</p>
<p>See documentation for more details:
<a href="https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html" class="external">ExcalidrawScriptsEngine.html</a></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">*/</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">!</span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-color-text);">.verifyMinimumPluginVersion </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">!</span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.verifyMinimumPluginVersion</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;1.5.21&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Notice</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;This script requires a newer version of Excalidraw. Please install the latest version.&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">settings </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getScriptSettings</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-token-comment);">//set default values on first run</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">!</span><span style="color:var(--shiki-color-text);">settings[</span><span style="color:var(--shiki-token-string-expression);">&quot;Layout Options JSON&quot;</span><span style="color:var(--shiki-color-text);">]) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  settings </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;Layout Options JSON&quot;</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      height</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;450px&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      value</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">`{\n      &quot;org.eclipse.elk.layered.crossingMinimization.semiInteractive&quot;: &quot;true&quot;,\n      &quot;org.eclipse.elk.layered.considerModelOrder.components&quot;: &quot;FORCE_MODEL_ORDER&quot;\n}`</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      description</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">`You can use layout options to configure the layout algorithm. A list of all options and further details of their exact effects is available in &lt;a href=&quot;http://www.eclipse.org/elk/reference.html&quot; rel=&quot;nofollow&quot;>ELK's documentation&lt;/a>.`</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  };</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.setScriptSettings</span><span style="color:var(--shiki-color-text);">(settings);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">} </span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">typeof</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ELK</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;undefined&quot;</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">loadELK</span><span style="color:var(--shiki-color-text);">(doAutoLayout);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">} </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">doAutoLayout</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">async</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">doAutoLayout</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">selectedElements</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getViewSelectedElements</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groups</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> ea</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.getMaximumGroups</span><span style="color:var(--shiki-color-text);">(selectedElements)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((g) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">g</span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">((el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.containerId </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">null</span><span style="color:var(--shiki-color-text);">)) </span><span style="color:var(--shiki-token-comment);">// ignore text in stickynote</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">((els) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">els</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">stickynotesMap</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> selectedElements</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">((el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.containerId </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">null</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.reduce</span><span style="color:var(--shiki-color-text);">((result</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">result</span><span style="color:var(--shiki-token-function);">.set</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.containerId</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> el);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> result;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Map</span><span style="color:var(--shiki-color-text);">());</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elk</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">ELK</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithms</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elk</span><span style="color:var(--shiki-token-function);">.knownLayoutAlgorithms</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">layoutAlgorithms</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> knownLayoutAlgorithms</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((knownLayoutAlgorithm) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> ({</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      id</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      displayText</span><span style="color:var(--shiki-token-keyword);">:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.radial&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.mrtree&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;* &quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.name </span><span style="color:var(--shiki-token-keyword);">+</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-string-expression);">&quot;: &quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.description</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.name </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;: &quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.description</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.sort</span><span style="color:var(--shiki-color-text);">((lha</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> rha) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">lha</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">displayText</span><span style="color:var(--shiki-token-function);">.localeCompare</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">rha</span><span style="color:var(--shiki-color-text);">.displayText));</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">layoutAlgorithmsSimple</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> knownLayoutAlgorithms</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((knownLayoutAlgorithm) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> ({</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      id</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      displayText</span><span style="color:var(--shiki-token-keyword);">:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.radial&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.mrtree&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;* &quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.name</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownLayoutAlgorithm</span><span style="color:var(--shiki-color-text);">.name</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.sort</span><span style="color:var(--shiki-color-text);">((lha</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> rha) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">lha</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">displayText</span><span style="color:var(--shiki-token-function);">.localeCompare</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">rha</span><span style="color:var(--shiki-color-text);">.displayText));</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">// const knownOptions = knownLayoutAlgorithms</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//   .reduce(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//     (result, knownLayoutAlgorithm) => [</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//       ...result,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//       ...knownLayoutAlgorithm.knownOptions,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//     ],</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//     []</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//   )</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//   .filter((value, index, self) => self.indexOf(value) === index) // remove duplicates</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">//   .sort((lha, rha) => lha.localeCompare(rha));</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-comment);">// console.log(&quot;knownOptions&quot;, knownOptions);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">selectedAlgorithm</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.suggester</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">layoutAlgorithms</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((algorithmInfo) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">algorithmInfo</span><span style="color:var(--shiki-color-text);">.displayText)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">layoutAlgorithms</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((algorithmInfo) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">algorithmInfo</span><span style="color:var(--shiki-color-text);">.id)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;Layout algorithm&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  );</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownNodePlacementStrategy</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;SIMPLE&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;INTERACTIVE&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;LINEAR_SEGMENTS&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;BRANDES_KOEPF&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;NETWORK_SIMPLEX&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  ];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">knownDirections</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;UNDEFINED&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;RIGHT&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;LEFT&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;DOWN&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;UP&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  ];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> nodePlacementStrategy </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;BRANDES_KOEPF&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> componentComponentSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;10&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> nodeNodeSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;100&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> nodeNodeBetweenLayersSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;100&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> discoComponentLayoutAlgorithm </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> direction </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;UNDEFINED&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (selectedAlgorithm </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered&quot;</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodePlacementStrategy </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.suggester</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      knownNodePlacementStrategy</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      knownNodePlacementStrategy</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;Node placement strategy&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    );</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    selectedDirection </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.suggester</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      knownDirections</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      knownDirections</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;Direction&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    direction </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> selectedDirection</span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-token-string-expression);">&quot;UNDEFINED&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  } </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (selectedAlgorithm </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.disco&quot;</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">componentLayoutAlgorithms</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">layoutAlgorithmsSimple</span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">(al </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">al</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">!==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.disco&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">selectedDiscoComponentLayoutAlgorithm</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.suggester</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">componentLayoutAlgorithms</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((algorithmInfo) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">algorithmInfo</span><span style="color:var(--shiki-color-text);">.displayText)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">componentLayoutAlgorithms</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((algorithmInfo) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">algorithmInfo</span><span style="color:var(--shiki-color-text);">.id)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;Disco Connected Components Layout Algorithm&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    discoComponentLayoutAlgorithm </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> selectedDiscoComponentLayoutAlgorithm</span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    selectedAlgorithm </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.box&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    selectedAlgorithm </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.rectpacking&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  ) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodeNodeSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.inputPrompt</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Node Spacing&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;number&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;10&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  } </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> userSpacingStr </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">await</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">utils</span><span style="color:var(--shiki-token-function);">.inputPrompt</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;Components Spacing, Node Spacing, Node Node Between Layers Spacing&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;number, number, number&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;10, 100, 100&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> userSpacingArr </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> (userSpacingStr</span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.split</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;,&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    componentComponentSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> userSpacingArr[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;10&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodeNodeSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> userSpacingArr[</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;100&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodeNodeBetweenLayersSpacing </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> userSpacingArr[</span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">??</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;100&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> layoutOptionsJson </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> {};</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">try</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    layoutOptionsJson </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">JSON</span><span style="color:var(--shiki-token-function);">.parse</span><span style="color:var(--shiki-color-text);">(settings[</span><span style="color:var(--shiki-token-string-expression);">&quot;Layout Options JSON&quot;</span><span style="color:var(--shiki-color-text);">].value);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  } </span><span style="color:var(--shiki-token-keyword);">catch</span><span style="color:var(--shiki-color-text);"> (e) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Notice</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-string-expression);">&quot;Error reading Layout Options JSON, see developer console for more information&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">4000</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">console</span><span style="color:var(--shiki-token-function);">.log</span><span style="color:var(--shiki-color-text);">(e);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;elk.algorithm&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> selectedAlgorithm;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.spacing.componentComponent&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    componentComponentSpacing;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.spacing.nodeNode&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> nodeNodeSpacing;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered.spacing.nodeNodeBetweenLayers&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodeNodeBetweenLayersSpacing;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.layered.nodePlacement.strategy&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    nodePlacementStrategy;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.disco.componentCompaction.componentLayoutAlgorithm&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span></span>
<span data-line><span style="color:var(--shiki-color-text);">    discoComponentLayoutAlgorithm;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  layoutOptionsJson[</span><span style="color:var(--shiki-token-string-expression);">&quot;org.eclipse.elk.direction&quot;</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> direction;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">graph</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    id</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;root&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    layoutOptions</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> layoutOptionsJson</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    children</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> []</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    edges</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> []</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  };</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> groupMap </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Map</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> targetElkMap </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Map</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> arrowEls </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> i </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">; i </span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groups</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);">; i</span><span style="color:var(--shiki-token-keyword);">++</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elements</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> groups[i];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">elements</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      (elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">].type </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;arrow&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">||</span><span style="color:var(--shiki-color-text);"> elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">].type </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;line&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    ) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">].type </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;arrow&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">].startBinding </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">].endBinding</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      ) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">arrowEls</span><span style="color:var(--shiki-token-function);">.push</span><span style="color:var(--shiki-color-text);">(elements[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">]);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    } </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> elkId </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;g&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> i;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">elements</span><span style="color:var(--shiki-token-function);">.reduce</span><span style="color:var(--shiki-color-text);">((result</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">result</span><span style="color:var(--shiki-token-function);">.set</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.id</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> elkId);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> result;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      }</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> targetElkMap);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">box</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getBoundingBox</span><span style="color:var(--shiki-color-text);">(elements);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">groupMap</span><span style="color:var(--shiki-token-function);">.set</span><span style="color:var(--shiki-color-text);">(elkId</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        elements</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> elements</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        boundingBox</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> box</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      });</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">graph</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">children</span><span style="color:var(--shiki-token-function);">.push</span><span style="color:var(--shiki-color-text);">({</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        id</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> elkId</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        width</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">box</span><span style="color:var(--shiki-color-text);">.width</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        height</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">box</span><span style="color:var(--shiki-color-text);">.height</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        x</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">box</span><span style="color:var(--shiki-color-text);">.topX</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        y</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">box</span><span style="color:var(--shiki-color-text);">.topY</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      });</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> i </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">; i </span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">arrowEls</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);">; i</span><span style="color:var(--shiki-token-keyword);">++</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">arrowEl</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> arrowEls[i];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">startElkId</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">targetElkMap</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">arrowEl</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">startBinding</span><span style="color:var(--shiki-color-text);">.elementId);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">endElkId</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">targetElkMap</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">arrowEl</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">endBinding</span><span style="color:var(--shiki-color-text);">.elementId);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">graph</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">edges</span><span style="color:var(--shiki-token-function);">.push</span><span style="color:var(--shiki-color-text);">({</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      id</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;e&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> i</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      sources</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> [startElkId]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      targets</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> [endElkId]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    });</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">initTopX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">Math</span><span style="color:var(--shiki-token-function);">.min</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-token-constant);">Array</span><span style="color:var(--shiki-token-function);">.from</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">groupMap</span><span style="color:var(--shiki-token-function);">.values</span><span style="color:var(--shiki-color-text);">())</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((v) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">v</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">boundingBox</span><span style="color:var(--shiki-color-text);">.topX)) </span><span style="color:var(--shiki-token-keyword);">-</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">12</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">initTopY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">Math</span><span style="color:var(--shiki-token-function);">.min</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-token-constant);">Array</span><span style="color:var(--shiki-token-function);">.from</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">groupMap</span><span style="color:var(--shiki-token-function);">.values</span><span style="color:var(--shiki-color-text);">())</span><span style="color:var(--shiki-token-function);">.map</span><span style="color:var(--shiki-color-text);">((v) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">v</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">boundingBox</span><span style="color:var(--shiki-color-text);">.topY)) </span><span style="color:var(--shiki-token-keyword);">-</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">12</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  elk</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.layout</span><span style="color:var(--shiki-color-text);">(graph)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.then</span><span style="color:var(--shiki-color-text);">((resultGraph) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elkEl</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">of</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">resultGraph</span><span style="color:var(--shiki-color-text);">.children) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">group</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupMap</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">elkEl</span><span style="color:var(--shiki-color-text);">.id);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">of</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">group</span><span style="color:var(--shiki-color-text);">.elements) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">originalDistancX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">group</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">boundingBox</span><span style="color:var(--shiki-color-text);">.topX;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">originalDistancY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">group</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">boundingBox</span><span style="color:var(--shiki-color-text);">.topY;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupElDistanceX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">elkEl</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> initTopX </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> originalDistancX </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.x;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupElDistanceY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">elkEl</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> initTopY </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> originalDistancY </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.y;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> groupElDistanceX;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> groupElDistanceY;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">          </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">stickynotesMap</span><span style="color:var(--shiki-token-function);">.has</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.id)) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">stickynote</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">stickynotesMap</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">groupEl</span><span style="color:var(--shiki-color-text);">.id);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">stickynote</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">stickynote</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> groupElDistanceX;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">stickynote</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">stickynote</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> groupElDistanceY;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">          }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.copyViewElementsToEAforEditing</span><span style="color:var(--shiki-color-text);">(selectedElements);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.addElementsToView</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-function);">normalizeSelectedArrows</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    })</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.catch</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">console</span><span style="color:var(--shiki-color-text);">.error);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">loadELK</span><span style="color:var(--shiki-color-text);">(doAfterLoaded) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> script </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.createElement</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;script&quot;</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">script</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onload</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> () {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">typeof</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ELK</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">!==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;undefined&quot;</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-function);">doAfterLoaded</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  };</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">script</span><span style="color:var(--shiki-color-text);">.src </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;https://cdn.jsdelivr.net/npm/elkjs@0.8.2/lib/elk.bundled.min.js&quot;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">head</span><span style="color:var(--shiki-token-function);">.appendChild</span><span style="color:var(--shiki-color-text);">(script);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">/*</span></span>
<span data-line><span style="color:var(--shiki-token-comment);"> * Normalize Selected Arrows</span></span>
<span data-line><span style="color:var(--shiki-token-comment);"> */</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">normalizeSelectedArrows</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> gapValue </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">selectedIndividualArrows</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getMaximumGroups</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getViewSelectedElements</span><span style="color:var(--shiki-color-text);">())</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">.reduce</span><span style="color:var(--shiki-color-text);">((result</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> g) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-color-text);">result</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-token-constant);">g</span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">(el </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.type </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'arrow'</span><span style="color:var(--shiki-color-text);">)]</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> []);</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">allElements</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.getViewElements</span><span style="color:var(--shiki-color-text);">();</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">arrow</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">of</span><span style="color:var(--shiki-color-text);"> selectedIndividualArrows) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">startBindingEl</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">allElements</span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      (el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">arrow</span><span style="color:var(--shiki-color-text);">.startBinding </span><span style="color:var(--shiki-token-keyword);">||</span><span style="color:var(--shiki-color-text);"> {}).elementId</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    )[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">endBindingEl</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">allElements</span><span style="color:var(--shiki-token-function);">.filter</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      (el) </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.id </span><span style="color:var(--shiki-token-keyword);">===</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">arrow</span><span style="color:var(--shiki-color-text);">.endBinding </span><span style="color:var(--shiki-token-keyword);">||</span><span style="color:var(--shiki-color-text);"> {}).elementId</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    )[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (startBindingEl) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-function);">recalculateStartPointOfLine</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        arrow</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        startBindingEl</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        endBindingEl</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        gapValue</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      );</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (endBindingEl) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-function);">recalculateEndPointOfLine</span><span style="color:var(--shiki-color-text);">(arrow</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> endBindingEl</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> startBindingEl</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> gapValue);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.copyViewElementsToEAforEditing</span><span style="color:var(--shiki-color-text);">(selectedIndividualArrows);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.addElementsToView</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-color-text);">);</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">recalculateStartPointOfLine</span><span style="color:var(--shiki-color-text);">(line</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> el</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> elB</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> gapValue) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">aX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.width </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">bX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span><span style="color:var(--shiki-color-text);"> elB</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.width </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">aY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.height </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">bY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span><span style="color:var(--shiki-color-text);"> elB</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.height </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">startBinding</span><span style="color:var(--shiki-color-text);">.gap </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> gapValue;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">startBinding</span><span style="color:var(--shiki-color-text);">.focus </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">intersectA</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.intersectElementWithLine</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    el</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    [bX</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> bY]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    [aX</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> aY]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">startBinding</span><span style="color:var(--shiki-color-text);">.gap</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  );</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">intersectA</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">let</span><span style="color:var(--shiki-color-text);"> i </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">; i </span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);">; i</span><span style="color:var(--shiki-token-keyword);">++</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[i][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-=</span><span style="color:var(--shiki-color-text);"> intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.x;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[i][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-=</span><span style="color:var(--shiki-color-text);"> intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.y;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">recalculateEndPointOfLine</span><span style="color:var(--shiki-color-text);">(line</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> el</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> elB</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> gapValue) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">aX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.width </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">bX</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span><span style="color:var(--shiki-color-text);"> elB</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.width </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.x </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">aY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">el</span><span style="color:var(--shiki-color-text);">.height </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">bY</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span><span style="color:var(--shiki-color-text);"> elB</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">?</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">elB</span><span style="color:var(--shiki-color-text);">.height </span><span style="color:var(--shiki-token-keyword);">/</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      </span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.y </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">2</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">];</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">endBinding</span><span style="color:var(--shiki-color-text);">.gap </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> gapValue;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">endBinding</span><span style="color:var(--shiki-color-text);">.focus </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">intersectA</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">ea</span><span style="color:var(--shiki-token-function);">.intersectElementWithLine</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    el</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    [bX</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> bY]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    [aX</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> aY]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">endBinding</span><span style="color:var(--shiki-color-text);">.gap</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  );</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">intersectA</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">></span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.points[</span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">points</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">length</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.x</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">      intersectA[</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">][</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">] </span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">line</span><span style="color:var(--shiki-color-text);">.y</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    ];</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.0.10</a>, ¬© 2023</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>